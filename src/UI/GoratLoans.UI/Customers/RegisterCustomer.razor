@page "/RegisterCustomer"
@using Microsoft.AspNetCore.Components
@using System.ComponentModel.DataAnnotations

<h3>Register new customer</h3>

<EditForm Model="@RegisterCustomerRequest" OnSubmit=@FormSubmitted>

    <DataAnnotationsValidator/>
    <div class="form-group">
        <label for="FirstName">First name:</label>
        <InputText class="form-control" @bind-Value="RegisterCustomerRequest.FirstName" id="FirstName"/>
        <ValidationMessage For="() => RegisterCustomerRequest.FirstName"/>
    </div>
    <div class="form-group">
        <label>Last name:</label>
        <input type="text" class="form-control mb-4" @bind="RegisterCustomerRequest.LastName" placeholder="Enter last name" id="LastName">
        <ValidationMessage For="() => RegisterCustomerRequest.LastName"/>
    </div>
    <div class="form-group">
        <label>Birth date:</label>
        <InputDate @bind-Value="RegisterCustomerRequest.BirthDate" class="form-control mb-2" id="BirthDate"/>
        <ValidationMessage For="() => RegisterCustomerRequest.BirthDate"/>
    </div>
    <div class="form-group">
        <label>Address:</label>
        <input type="text" class="form-control mb-2" @bind="RegisterCustomerRequest.Address" placeholder="Enter address" id="Address">
        <ValidationMessage For="() => RegisterCustomerRequest.Address"/>
    </div>

    <button type="submit" class="btn btn-primary">Create</button>

</EditForm>

@code {

    public class RegisterCustomerRequestModel
    {
        public Guid CustomerId { get; set; } = Guid.NewGuid();

        [Required]
        [StringLength(100, MinimumLength = 3)]
        public string FirstName { get; set; }

        [Required]
        [StringLength(200, MinimumLength = 3)]
        public string LastName { get; set; }

        [Required]
        public DateOnly BirthDate { get; set; }

        [Required]
        [StringLength(200, MinimumLength = 3)]
        public string Address { get; set; }
    }

    private RegisterCustomerRequestModel RegisterCustomerRequest = new()
    {
        BirthDate = new DateOnly(DateTime.Now.Year - 18, DateTime.Now.Month, DateTime.Now.Day)
    };

    private Task FormSubmitted(EditContext editContext)
    {
        if (editContext.Validate())
        {
        }

        return Task.CompletedTask;
    }

}